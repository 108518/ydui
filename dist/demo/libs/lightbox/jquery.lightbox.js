!function(t){"function"==typeof define?define(["jquery"],t):t(jQuery)}(function(t){t.fn.lightbox=function(i){return this.each(function(){var e=t.extend({imgs:"img"},i),n=t(this).find(e.imgs),s=n.length,o=t("body");if(!(0>=s)){var r={sliding:0,startClientX:0,startPixelOffset:0,pixelOffset:0,currentSlide:0,slideStart:function(t){t.originalEvent.touches&&(t=t.originalEvent.touches[0]),0==r.sliding&&(r.sliding=1,r.startClientX=t.clientX)},slide:function(i){i.preventDefault(),i.originalEvent.touches&&(i=i.originalEvent.touches[0]);var e=i.clientX-r.startClientX;if(1==r.sliding&&0!=e&&(r.sliding=2,r.startPixelOffset=r.pixelOffset),2==r.sliding){var n=1;(0==r.currentSlide&&i.clientX>r.startClientX||r.currentSlide==s-1&&i.clientX<r.startClientX)&&(n=3);var o=r.pixelOffset=r.startPixelOffset+e/n;t("#J_LightBoxImg").css("-webkit-transform","translate3d("+o+"px,0,0)").removeClass("lightbox-animate")}},slideEnd:function(){if(2==r.sliding){r.sliding=0,r.currentSlide=r.pixelOffset<r.startPixelOffset?r.currentSlide+1:r.currentSlide-1,r.currentSlide=Math.min(Math.max(r.currentSlide,0),s-1);var i=r.pixelOffset=r.currentSlide*-o.width();t("#J_LightBoxImg").addClass("lightbox-animate").css("-webkit-transform","translate3d("+i+"px,0,0)"),t("#J_Current").html(r.currentSlide+1)}},getImgsHtml:function(){var i="";return n.each(function(){i+='<div class="lightbox-item J_LightBoxItem" style="width: '+100/n.length+'%;">   <div class="lightbox-img">       <img src="'+(t(this).data("img")||t(this).attr("src"))+'"/>   </div></div>'}),i},showLightBox:function(i){var e="width: "+100*s+"%; -webkit-transform: translate3d("+-o.width()*i+"px, 0px, 0px);";o.append(t('<div class="m-lightbox" id="J_LightBox">    <div class="lightbox-header">        <div class="center"><span id="J_Current">'+(i+1||1)+"</span><em>/</em>"+s+'</div>        <a href="javascript:history.back();">关闭</a>    </div>    <div class="lightbox-con" id="J_LightBoxImg" style="'+e+'">'+r.getImgsHtml()+"</div></div>")),r.currentSlide=i,r.pixelOffset=-o.width()*i;var n=window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}();t("#J_LightBoxImg").on(n?"touchstart":"mousedown",r.slideStart).on(n?"touchend":"mouseup",r.slideEnd).on(n?"touchmove":"mousemove",r.slide)}};n.each(function(i){t(this).on("click",function(){window.history.pushState("","",window.location.href.split("#")[0]+"#lightbox"),r.showLightBox(i)})}),t(window).on("hashchange",function(){t("#J_LightBox").remove()})}})}});